{"data":{"site":{"siteMetadata":{"title":"jarednielsen.com","author":"Jared Nielsen"}},"markdownRemark":{"id":"5165fff0-5032-5f86-8cf6-8684212f1981","excerpt":"One of the most useful aspects of Git is the ability for developers to create branches of a project to test new features and fix bugs without modifying the code…","html":"<p>One of the most useful aspects of Git is the ability for developers to create branches of a project to test new features and fix bugs without modifying the code in production. Each repository has at least one if not more branches. When you initialize a new repository, a master branch is created by default. Git allows you to create branches that <em>stem</em> from the <em>trunk</em> of your project. A branch, at its core (no pun intended), is a unique series of code changes with a unique name. Your branch name should be descriptive, so that you and your collaborators can easily infer the work being done.</p>\n<p>You will learn:</p>\n<ul>\n<li>How to create and checkout a branch</li>\n<li>How to merge branches</li>\n<li>How to delete branches</li>\n<li>How to push a branch to a remote origin</li>\n<li>How to open a pull request</li>\n<li>How to resolve conflicts using the Git branch workflow</li>\n</ul>\n<p>This tutorial is divided into two parts. The first part walks you through the basics of a Git branch workflow. The second part is designed for collaborating with a partner using the Git branch workflow. You don’t need a partner to follow along, but you won’t be able to complete all of the operations unless you configure two separate Github accounts.</p>\n<p>Can’t find a partner? Hit me up <a href=\"https;//twitter.com/jarednielsen\">@jarednielsen</a></p>\n<h2>Initializing a Repository</h2>\n<p>On <a href=\"https://github.com\">GitHub.com</a>, create a new repository <code>git-workflow-branching</code></p>\n<p>Initialize with a <code>README</code></p>\n<p>On the landing page of your repository, note that you have 1 branch named <em>master</em>.</p>\n<p>From the command line,</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone &lt;URL to git-workflow-branching&gt;\ncd git-workflow-branching</code></pre></div>\n<h2>Git Branch Workflow</h2>\n<p>Run the following command to see all your branches:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch</code></pre></div>\n<p>The output will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* master</code></pre></div>\n<p>By default, the first branch is called <code>master</code>. The asterisk alerts us to which branch we are currently in. There’s one very important rule in the Git branch workflow: anything in the <code>master</code> branch is always deployable. Because of this, it’s extremely important that your new branch is created off of master when working on a feature or a fix.</p>\n<p>To create a new branch, named <code>dev</code>, type the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout -b dev</code></pre></div>\n<p>You’ll receive this message:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Switched to a new branch &#39;dev&#39;</code></pre></div>\n<p>And if you run <code>git branch</code> again the output will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* dev\n  master</code></pre></div>\n<p>The <code>git checkout</code> command lets you navigate between the branches created by <code>git branch</code>. Checking out a branch updates the files in the working directory to match the version stored in that branch, and it tells Git to record all new commits on that branch. Think of it as a way to select which line of development you’re working on. The <code>-b</code> flag allows you to simultaneously checkout and create a branch. You can also create a branch using</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch &lt;name-of-branch&gt;</code></pre></div>\n<p>This does not ‘checkout’ the branch, though. Try it.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch test\ngit branch</code></pre></div>\n<p>Your output should be:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">* dev\n  master\n  test</code></pre></div>\n<p>You are still working in the <code>dev</code> branch, even though you created a new branch <code>test</code>.</p>\n<p>To delete a branch:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch -d test</code></pre></div>\n<p>Verify that test is gone</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch</code></pre></div>\n<p>You can switch back and forth between your two branches, by using the <code>git checkout</code> command:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master\ngit checkout dev</code></pre></div>\n<p>Every time you begin working on your project, run</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master\ngit pull</code></pre></div>\n<p><strong>Every time!</strong></p>\n<p><em>Why?</em></p>\n<ol>\n<li>So you know where you are and you don’t start working in the wrong branch.</li>\n<li>So your local repo is up to date with the remote.</li>\n</ol>\n<p>So what’s the habit you’re going to make?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master\ngit pull</code></pre></div>\n<h2>Merging Branches</h2>\n<p>Now, switch to your dev branch if you’re not already there.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout dev</code></pre></div>\n<p>Create a new file</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">touch index.html</code></pre></div>\n<p>Add and commit the file</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git add index.html\ngit commit -m “Add index”</code></pre></div>\n<p>The new file is now committed to our dev branch.</p>\n<p>Run <code>ls</code> to view all files in the dev branch.</p>\n<p>Switch to your master branch</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master</code></pre></div>\n<p>And list (<code>ls</code>) all files.</p>\n<p>What’s missing?</p>\n<p><code>index.html.</code></p>\n<p>Let’s merge the file from <code>dev</code> into our <code>master</code> branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git merge dev</code></pre></div>\n<p>The merge command does what? You guessed it. For educational purposes, let’s verify that <code>index.html</code> was in fact merged from <code>dev</code> to <code>master</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ls</code></pre></div>\n<p>Yo la tengo!</p>\n<p>What does Fast-forward mean? When we merged our <code>dev</code> branch it was ahead of our <code>master</code> branch, so Git <em>fast-forwarded</em> our <code>master</code> branch to catch up to the changes we merged from <code>dev</code>.</p>\n<p>Now push to the remote:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push</code></pre></div>\n<h2>Pull Requests</h2>\n<p>Back at GitHub.com, you will see that <code>index.html</code> is now in our remote repository. But we still only have one branch. Our <code>dev</code> branch didn’t push.</p>\n<p>Back at the Terminal, switch to your <code>dev</code> branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout dev</code></pre></div>\n<p>Add a new file</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">touch server.js\ngit add server.js\ngit commit -m “server.js”</code></pre></div>\n<p>If you run git push, you will receive this error:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fatal: The current branch dev has no upstream branch.</code></pre></div>\n<p>To push the current branch and set the remote as upstream, use</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push --set-upstream origin dev</code></pre></div>\n<p>While the solution this prompt offers works, it isn’t best practice for our workflow model. Instead, we only need to push our new branch to our origin:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push origin dev</code></pre></div>\n<p>Go back to your repo on GitHub.com. You will see that you now have two branches, Using the <strong>Branch</strong> toggle, you can switch back and forth between your branches and see the changes that exist between them.</p>\n<p>Either click the green <strong>Compare &#x26; pull request</strong> button or select the branches tab and under your dev branch click <strong>New pull request</strong>. This will route you to a page where you can compare the changes between branches and merge the two. Add a useful comment and click <strong>Create Pull Request</strong>. You will be routed to another page where you can confirm the merge.</p>\n<p>Return to the landing page for your repo and you will see that <code>server.js</code> is now in your master branch.</p>\n<p>Back at your Terminal, switch to your master branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master</code></pre></div>\n<p>And update your repo locally.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git pull</code></pre></div>\n<p>Best practice with branches is to delete them once the work has been merged. First delete it remotely:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push --delete origin dev</code></pre></div>\n<p>Then delete it locally. (Note: you can’t be in the branch you want to delete and if the branch is not <em>empty</em>, you need to use the <code>-D</code> switch.)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch -D dev</code></pre></div>\n<p>Now</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git branch</code></pre></div>\n<p>You should only have master. Verify that it is in fact removed from your remote repo.</p>\n<p>Cool beans? Now find a friend.</p>\n<h2>Collaborative Git Workflow with Branches</h2>\n<h3>Partner 1</h3>\n<p>In your master branch, create a <code>.gitignore</code> for your project.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">touch .gitignore</code></pre></div>\n<p>Don’t forget the <code>.</code> at the beginning of the file name.</p>\n<p>Open this in your IDE and add the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">node_modules</code></pre></div>\n<p>Save, add, commit and push.</p>\n<p><a href=\"http://bfy.tw/2V2w\">What is .gitignore doing?</a></p>\n<p>Now that we are working with packages, your applications will always need a .gitignore.</p>\n<p>On GitHub.com, under <strong>Settings</strong>, select the Collaborators menu option in the left sidebar.</p>\n<p>In the field in the Collaborators panel, search for your partners GitHub account and click <strong>Add collaborators</strong>.</p>\n<p>This will send an email to your partner. Alternatively, you can select the <strong>Copy invite link</strong> option and send it by other means.</p>\n<h3>Partner 2</h3>\n<p>Accept the invitation and clone your partner’s repo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rm -rf git-workflow-branching\ngit clone &lt;URL-to-partners-git-workflow-branching&gt;\ncd git-workflow-branching</code></pre></div>\n<p>Now create a branch called “new-feature”</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout -b new-feature</code></pre></div>\n<p>Open <code>server.js</code> in your IDE and add boilerplate Express app code:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I love Git!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"App listening on PORT \"</span> <span class=\"token operator\">+</span> <span class=\"token constant\">PORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Save, add, and commit. When you run git push, you’re going to get this error:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fatal: The current branch new-feature has no upstream branch.</code></pre></div>\n<p>To push the current branch and set the remote as upstream, use</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push --set-upstream origin new-feature</code></pre></div>\n<p>What do you need to do?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git push origin new-feature</code></pre></div>\n<p>Now go to GitHub.com. You will see that your branch, <code>new-feature</code>, is now added to the remote repo. Make a pull request with a useful comment. Let your partner know you’ve made the pull request, but don’t merge it.</p>\n<h3>Partner 1</h3>\n<p>You should receive an email informing you that your partner made a pull request. Click the link in the email to review it on GitHub. Alternatively, navigate to the <strong>Pull requests</strong> tab via the landing page of your repo. You will see this message:\n<em>This branch has no conflicts with the base branch</em></p>\n<p>So go ahead and merge the pull request.</p>\n<h3>Partner 2</h3>\n<p>Check your email. You should receive a notification that your pull request was merged. You can follow the link to see the details.</p>\n<h2>Resolving Conflict in the Git Branch Workflow</h2>\n<h3>Both Partners</h3>\n<p>If only it was always this easy. Let’s make some conflict!</p>\n<p>What are the first two things you need to do before working on a project?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master\ngit pull</code></pre></div>\n<h3>Partner 1</h3>\n<p>Create a branch to work on:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout -b another-feature</code></pre></div>\n<p>Open <code>server.js</code> in your IDE and replace <code>res.send()</code> in the GET method to <code>res.sendFile()</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">app<span class=\"token punctuation\">.</span><span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">sendFile</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Don’t forget to add the path package to your app:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Save, add, commit, push.</p>\n<p>Yup.</p>\n<p>You need to add the upstream to remote.</p>\n<h3>Partner 2</h3>\n<p>Navigate to the repo on GitHub.com. In the Branches tab, under Active, you will see the new branch <code>another-feature</code>. Click the <strong>New pull request</strong> button. Towards the bottom of this page, you should see something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@@ -1,10 +1,11 @@\n\nvar express = require(&quot;express&quot;);\n+  var path = require(&quot;path&quot;);\n\nvar app = express();\nvar PORT = 3000;\n\napp.get(&quot;/&quot;, function(req, res) {\n-  res.send(&quot;I love Git!&quot;);\n+  res.sendFile(path.join(__dirname, &quot;index.html&quot;));\n});\n\napp.listen(PORT, function() {</code></pre></div>\n<p>Your partner’s changes and additions are highlighted in green and deleted code is highlighted in red. If you agree with what your partner did, leave a useful comment such as, “Nice! Now we need some HTML to serve!’, and create the pull request. On the next page, <strong>Merge and Confirm</strong>.</p>\n<p>Nice! Now we need some HTML to serve!</p>\n<p>On GitHub.com, navigate to your <code>index.html</code> file.</p>\n<p>Click the pencil icon to edit the blank file and copy/paste the following code into the editor:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>I love Git!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Commit the changes by clicking the big green button at the bottom of the screen.</p>\n<p><strong>Both Partners</strong></p>\n<p>What’s the first thing you do when sitting down to work on your application?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git checkout master\ngit pull</code></pre></div>\n<h2>Learn Git Fork &#x26; Pull Request Workflow</h2>\n<p>In the next tutorial you will learn how to use branches when working with a forked repository.</p>","frontmatter":{"title":"Learn Git Branch Workflow","date":"February 11, 2019","description":"The Git branch workflow allows developers to create branches of a project to test new features and fix bugs without modifying code in production. In this tutorial, you will learn Git branch workflow basics and best practices."}}},"pageContext":{"slug":"/learn-git-branch-workflow/","previous":{"fields":{"slug":"/learn-git-workflow-centralized/"},"frontmatter":{"title":"Learn Git Workflow Centralized Collaboration"}},"next":null}}