{"data":{"site":{"siteMetadata":{"title":"jarednielsen.com","author":"Jared Nielsen"}},"markdownRemark":{"id":"242a8d63-dd44-5012-b9dd-6d06d3737ac0","excerpt":"The most powerful, and sometimes powerfully frustrating, aspect of Git is the collaborative workflow it enables. In order to  really  learn Git workflow, you…","html":"<p>The most powerful, and sometimes powerfully frustrating, aspect of Git is the collaborative workflow it enables. In order to <em>really</em> learn Git workflow, you need to work through conflict, which means you need to work with a team. This tutorial introduces the centralized model for collaboration and is designed for two to work through together. If you’re just joining us, you may want to <a href=\"/learn-git-workflow-basics/\">Learn Git Workflow Basics</a></p>\n<p>You will learn:</p>\n<ul>\n<li>Adding Collaborators to a New Repository</li>\n<li>Integrating Remote Changes</li>\n<li>Resolving Conflicts</li>\n<li>Using vi with Merge Commits</li>\n</ul>\n<p>You don’t necessarily need a partner to follow along, but you won’t be able to perform all of the operations without a collaborator unless you configure two profiles to switch between.</p>\n<p>Can’t find a partner? Hit me up <a href=\"https;//twitter.com/jarednielsen\">@jarednielsen</a></p>\n<h2>Initialize a Repository and Add Collaborators</h2>\n<p>When you initialize a new repository, a master branch is created by default. A centralized workflow uses only the master branch. We will learn to use branches in the next article.</p>\n<h3>Partner 1:</h3>\n<p>Go to <a href=\"https://github.com\">GitHub.com</a> and create a new repo named <code>git-workflow-centralized</code></p>\n<p>Initialize it with a <code>README</code>.</p>\n<p>Under <strong>Settings</strong>, select the <strong>Collaborators</strong> menu option.</p>\n<p>In the field in the <strong>Collaborators</strong> panel, search for your partners GitHub account and click <strong>Add collaborators</strong>.</p>\n<p>This will send an email to your partner. Alternatively, you can select the <strong>Copy invite link</strong> and send it by other means.</p>\n<h3>Partner 2</h3>\n<p>Accept the invitation.</p>\n<h3>Both Partners</h3>\n<p>From the command line:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git clone &lt;URL-to-git-workflow-centralized&gt;\ncd git-workflow-centralized</code></pre></div>\n<p>Verify that you both have the repository cloned locally.</p>\n<h2>Git Workflow</h2>\n<h3>Partner 2</h3>\n<p>Recall that the Git workflow model is <strong>EDIT</strong>, <strong>STAGE</strong>, <strong>COMMIT</strong>. Create an index.html file:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">touch index.html</code></pre></div>\n<p>Add boilerplate HTML:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Git Workflow, Centralized<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Git Workflow, Centralized<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>You should have ~9 lines of code. Save it. Then add, commit, and push to the remote origin:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git add .\ngit commit -m “Created index.html”\ngit push</code></pre></div>\n<h3>Partner 1</h3>\n<p>Pull the repo after your partner’s push. Verify that you both have boilerplate <code>index.html</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ls\ncat index.html</code></pre></div>\n<p>Now open <code>index.html</code> and add this image tag directly below <code>&#x3C;h1></code>, on line 8, replacing the <code>alt</code> attribute with your name:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”https://gph.is/1nQGqSa”</span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”Jack”</span> <span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Save, then add, commit and push.</p>\n<h2>Integrating Remote Changes &#x26;&#x26; Resolving Conflicts</h2>\n<h3>Partner 2</h3>\n<p>After your partner pushes the changes, without making a new pull, add this image tag directly below <code>&#x3C;h1></code>, on line 8:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://gph.is/191zeP3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”Jill”</span> <span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Save, then add, commit and push.</p>\n<p>Uh oh! Errors!</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">To github.com:&lt;repo-owners-name&gt;/git-workflow-centralized.git\n ! [rejected]        master -&gt; master (fetch first)\nerror: failed to push some refs to &#39;git@github.com:&lt;repo-owners-name&gt;/git-workflow-centralized.git&#39;\nhint: Updates were rejected because the remote contains work that you do\nhint: not have locally. This is usually caused by another repository pushing\nhint: to the same ref. You may want to first integrate the remote changes\nhint: (e.g., &#39;git pull ...&#39;) before pushing again.\nhint: See the &#39;Note about fast-forwards&#39; in &#39;git push --help&#39; for details.</code></pre></div>\n<p>Git prevents you from overwriting official commits. You need to pull your partners’ updates into your repository, integrate them with your local changes, and then try again.</p>\n<p>If we read the response from Git in the console, we get a hint at what we need to do. What is it?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git pull</code></pre></div>\n<p>Uh oh again! When we run <code>git pull</code>, we get another error!</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Auto-merging index.html\nCONFLICT (content): Merge conflict in index.html\nAutomatic merge failed; fix conflicts and then commit the result.</code></pre></div>\n<p>You and your partner have conflicts! And you’re just getting to know each other…</p>\n<p>Open index.html in your IDE. You will see something similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://gph.is/191zeP3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”Jill”</span> <span class=\"token punctuation\">></span></span>\n=======\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”https://gph.is/1nQGqSa”</span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Jack<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n>>>>>>> edf14c1afac38dd473d5ff2a75da6ccdbcf7cacc</code></pre></div>\n<p>Where did that noise come from? Git. The angle brackets and equal signs demarcate the conflicting code. Here, it’s the two images you and your partner added. <code>HEAD</code> is a reference to the last commit in the currently checked-out branch (in our case, <code>master</code>). The last commit was the image Partner 2 added, so, as you can see, that is the <code>HEAD</code>. That long string of numbers is a hash for the purposes of tracking.</p>\n<p>Edit <code>index.html</code> so both images will be rendered. Do this by deleting the angle brackets, HEAD, equal signs and hash. Save, then add, commit and push. Be sure to give your commit a useful message like, “Resolved conflict between images”. Your HTML should now look something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Workflow Centralized<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>Workflow Centralized<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”https://gph.is/1nQGqSa”</span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>First image<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://gph.is/191zeP3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>”Second</span> <span class=\"token attr-name\">image”</span> <span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>Both Partners</h3>\n<p>With great power comes great responsibility. It’s very easy to erase hours of work when resolving conflicts. What is the solution to this problem?</p>\n<p>Communication.</p>\n<h3>Partner 1</h3>\n<p>Update your local copy with the changes to the remote:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git pull</code></pre></div>\n<p>Add a link to an external stylesheet to <code>index.html</code>. Under <code>&#x3C;title></code> in the <code>&#x3C;head></code>, add a new line and this element:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>style.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Do the same for an external JavaScript file on line 11.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Save, then add, commit and push.</p>\n<h2>Partner 2</h2>\n<p>From the command line, create two new files named, you guessed it, <code>app.js</code> and <code>style.css</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">touch app.js style.css</code></pre></div>\n<p>Add, commit and push the new files.</p>\n<p>Git tells you that your local branch is out of sync with the remote. What do we do?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git pull</code></pre></div>\n<p>When you run git pull, your screen will change and you will be presented with something similar to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Merge branch &#39;master&#39; of github.com:&lt;repo-owners-name&gt;/git-workflow-centralized\n\n# Please enter a commit message to explain why this merge is necessary,\n# especially if it merges an updated upstream into a topic branch.\n#\n# Lines starting with &#39;#&#39; will be ignored, and an empty message aborts\n# the commit.\n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n~                                                                               \n&quot;~/apps/git-workflow-centralized/.git/MERGE_MSG&quot; 7L, 297C</code></pre></div>\n<p>Check out the bar at the top of your Terminal. It should read something like this:</p>\n<p><code>git-workflow-centralized -- vi &#x3C; git pull</code></p>\n<p>If you haven’t already discovered it, built-in to your Terminal (or Git Bash) is a text editor, <a href=\"https://en.wikipedia.org/wiki/Vi\"><strong>vi</strong></a> (also referred to as <a href=\"https://en.wikipedia.org/wiki/Vim_(text_editor)\"><strong>vim</strong></a>). This allows us to edit files from within the Terminal, rather than opening them in an IDE.</p>\n<p>Note the readout at the bottom of your Terminal, something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;~/apps/git-workflow-centralized/.git/MERGE_MSG&quot; 7L, 297C</code></pre></div>\n<p>That is the absolute path to the git file you are currently editing.</p>\n<p>You are being presented with this screen as an opportunity to add a message to the merge you are about to make. You are not required to add a message, but, if you recall, Linus Torvalds created Git. He is a character. Here he is announcing this ‘functionality’ many years ago:</p>\n<blockquote>\n<p>Spreading the word about an upcoming ‘git’ UI change, since I’m largely to blame. This change hopefully makes people write merge messages to explain their merges, and maybe even decide not to merge at all when it’s not necessary. I’ve been using that git feature for the last few weeks now, and it has resulted in my merges from submaintainers having various notes in them (well, at least if the submainter gave me any). So I’m trying to lead by example. But if you don’t like explaining your merges, this might be annoying. Of course, if you don’t explain your merges, you are annoying, so it all evens out in the end. “Karmic balance”, so to say.</p>\n</blockquote>\n<p>Bottom line? Write a useful message.</p>\n<p><strong>vi</strong> may be configured differently for everyone. So if you attempt to add a message and nothing happens, press <code>i</code>. This is the <strong>vi</strong> keyboard shortcut for <code>INSERT</code>, which you should now see at the bottom of your Terminal.</p>\n<p>Add a message. When you are finished typing, press <code>ESC</code>. You will notice that <code>INSERT</code> disappeared. You are no longer in ‘edit’ mode. You now need to save your changes and exit the file. Enter the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:wq</code></pre></div>\n<p>The colon is required, it’s how you tell <strong>vi</strong> that you are entering commands. As you enter these commands, you will see them appear in the bottom of your Terminal. What do you think <code>w</code> and <code>q</code> signify? Write and Quit.</p>\n<p>Press <code>Enter</code> or <code>Return</code>.</p>\n<p>Voila! You successfully merged a commit to your project without conflict.</p>\n<p>Unless, of course, you and your partner are not so chummy.</p>\n<h3>Both Partners</h3>\n<p>Delete this repository or create a new one, swap roles, and go through this process again.</p>\n<h2>Learn Git Workflow, From Centralized to Branching</h2>\n<p>One of the most useful, but potentially confusing, aspects of git is the ability for developers to create branches of a project to test new features. In the next article, we will <a href=\"/learn-git-branch-workflow/\">Learn Git Branch Workflow</a>.</p>\n<h2>(Re)Sourcess</h2>\n<ul>\n<li><a href=\"http://rogerdudler.github.io/git-guide/\">http://rogerdudler.github.io/git-guide/</a></li>\n<li><a href=\"https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf\">https://services.github.com/on-demand/downloads/github-git-cheat-sheet.pdf</a></li>\n</ul>","frontmatter":{"title":"Learn Git Workflow Centralized Collaboration","date":"February 04, 2019","description":"In order to learn Git workflow, you need to work with a team. This tutorial introduces the centralized model for collaboration and is designed for two to work through together."}}},"pageContext":{"slug":"/learn-git-workflow-centralized/","previous":{"fields":{"slug":"/learn-git-workflow-basics/"},"frontmatter":{"title":"Learn Git Workflow Basics"}},"next":{"fields":{"slug":"/learn-git-branch-workflow/"},"frontmatter":{"title":"Learn Git Branch Workflow"}}}}