{"data":{"site":{"siteMetadata":{"title":"jarednielsen.com","author":"Jared Nielsen"}},"markdownRemark":{"id":"bfd7ade7-7ce3-5780-b60e-47060e68393d","excerpt":"@TODO: introduction If you’re just learning web development, the transition to an ORM and/or MVC framework can be challenging. This tutorial will walk you…","html":"<p><img src=\"./jared-nielsen-object-relational-mapping.png\" alt=\"Object-Relational Mapping\"></p>\n<p>@TODO: introduction</p>\n<p>If you’re just learning web development, the transition to an ORM and/or MVC framework can be challenging. This tutorial will walk you through a simple implementation of object-relational mapping to help you better understand how a full-featured JavaScript ORM, such as Sequelize, works under-the-hood, and how you can easily integrate it into a Model-View-Controller architecture.</p>\n<h2>Object-Relational Mapping</h2>\n<p><strong>What is ORM?</strong> Object Relational Mapping is a design system that maps an object-oriented programming language (such as JavaScript) to a relational database (such as MySQL).</p>\n<p><strong>Why is it useful?</strong> Object Relational Mapping allows us (developers) to separate concerns in our application with reusable methods for database queries. The added, and perhaps most important, benefit of this separation of concerns is that we can easily use other SQL databases without needing to rewrite the entire codebase and instead only update the ORM.</p>\n<h2>Promises, Promises</h2>\n<p>Both Sequelize and Mongoose tout themselves as Promise-based ORM/ODMs. In order to understand ORM, we need a baseline understanding of Promises.</p>\n<p>@TODO: promises</p>\n<p>For a deeper-dive, read my related article to <a href=\"http://jarednielsen.com/javascript-promises/\">Learn JavaScript Promises and Promise Methods</a>.</p>\n<h2>All The Cats Are Undefined</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"SELECT * FROM cats\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Now that we are using a Promise, we chain <code>.then()</code> and <code>.catch()</code> to our call to <code>all()</code>.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>5. Students Do: Promises Promises (10 mins)</h3>\n<ul>\n<li>\n<p>See <a href=\"#\">14-Stu_Promises-Promises/README.md</a> for instructions</p>\n</li>\n<li>\n<p>In this activity, students will add <code>create</code> and <code>update</code> functions to their <code>server.js</code> files utilizing Promises.</p>\n</li>\n<li>\n<p>The solution to this activity is straightforward, but if students are struggling, refer them back to previous Handlebars activities where they used CRUD methods, then encourage them to encapsulate those methods in a Promise and modify as needed to query their database.</p>\n</li>\n</ul>\n<h3>6. Everyone Do: Promises Promises Review (10 mins)</h3>\n<ul>\n<li>\n<p>Ask students to post their solutions in Slack. Select one solution and call on someone other than the author to explain the <code>create</code> function. Then call on another student to explain the <code>update</code> function. As students explain the code, reiterate (while rephrasing their explanations) the following points:</p>\n</li>\n<li>\n<p>Our <code>create</code> and <code>udpate</code> functions are very similar to the <code>all</code> function we created in the previous activity with the exception that these two receive arguments.</p>\n</li>\n<li>\n<p>The <code>create</code> function receives <code>name</code> and <code>sleepy</code> arguments and inserts their values into their corresponding columns using SQL prepared statements. The order in which we pass our arguments to our query method is important to ensure the values are inserted into the correct columns.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// create new cat with name and sleepy values</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> sleepy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"INSERT INTO cats (name, sleepy) VALUES (?, ?)\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> sleepy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>The <code>update</code> function receives <code>sleepy</code> and <code>id</code> arguments and updates the value in the <code>sleepy</code> column in a row in our <code>cats</code> table where the id is equal to the value stored in the <code>id</code> argument. Again, the order in which we pass our arguments to our <code>query</code> method is important to ensure the values are inserted into the correct columns.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// update cat sleepy value by id</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>sleepy<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sql <span class=\"token operator\">=</span> <span class=\"token string\">\"UPDATE cats SET sleepy = ? WHERE id = ?\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>sleepy<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Lastly, we call <code>create</code> and <code>update</code>, passing each their respective arguments.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// pass in a string for the 'name' of the cat and a boolean for 'sleepy'</span>\n<span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Keyboard\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// pass in a boolean value for 'sleepy' and the id of the cat to be updated</span>\n<span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>\n<p>If students attempted to use template literals or string concatenation to insert function arguments in their SQL statements rather than prepared statements, ask them why this might be a bad idea. Guide them toward the answer: it would make our application vulnerable to attack via SQL injection.</p>\n<ul>\n<li>\n<p>For a humorous explanation of SQL injection, refer students to this <a href=\"https://xkcd.com/327/\">xkcd</a> comic.</p>\n</li>\n<li>\n<p>If students have further questions, refer them to the Wikipedia articles on <a href=\"https://en.wikipedia.org/wiki/SQL_injection\">SQL Injection</a> and <a href=\"https://en.wikipedia.org/wiki/Prepared_statement\">Prepared statements</a>.</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3>7. Instructor Do: Models (15 mins)</h3>\n<ul>\n<li>\n<p>See <a href=\"#\">15-Ins_Models</a></p>\n</li>\n<li>\n<p>Activities 15 through 18 are crucial for students to understand MVC framework, especially in regards to data flow. Before walking students through building a model, lead a brief discussion on the topic.</p>\n</li>\n<li>\n<p>Ask students the following questions:</p>\n<ul>\n<li>\n<p>What is the M in MVC?</p>\n</li>\n<li>\n<p>Why is it called the Model?</p>\n</li>\n<li>\n<p>What does the Model do?</p>\n</li>\n<li>\n<p>How does it interact with the other two components, View and Controller?</p>\n</li>\n</ul>\n</li>\n<li>\n<p>If students struggle, guide them towards these answers:</p>\n<ul>\n<li>\n<p>The M in MVC is Model.</p>\n</li>\n<li>\n<p>The Model is so named because it defines the architecture, or shape, of the database. You could say it “models” the data.</p>\n</li>\n<li>\n<p>The Model is responsible for managing the dynamic data structure of an application.</p>\n</li>\n<li>\n<p>The Model receives user input from the controller and returns data to be rendered in the View.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>If students have further questions, refer them to the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\">MVC</a></p>\n</li>\n<li>\n<p>Remind students that one of the primary reasons for using the MVC framework is the separation of concerns. You will be demonstrating how to modularize the Model by separating the database queries from the controller logic in <code>server.js</code>.</p>\n<ul>\n<li>If students have further questions, refer them to the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Separation_of_concerns\">Separation of concerns</a>.</li>\n</ul>\n</li>\n<li>\n<p>If you are comfortable doing so, live code the refactoring of the application in the Unsolved folder and explain each step as you proceed. If you are not comfortable live coding, walk students through the files in the Solved folder. Either way, explain the following:</p>\n<ul>\n<li>\n<p>At the root level of the directory, we create a folder <code>db</code> and move the two <code>.sql</code> files into it. This is common practice for keeping an application organized.</p>\n</li>\n<li>\n<p>Again, at the root level of the directory, we create a folder, <code>config</code>, and inside <code>config</code> we create a file <code>connection.js</code>. This is also common practice for keeping an application organized and is the location where other configuration files will be stored.</p>\n</li>\n<li>\n<p>From <code>server.js</code>, we cut the boilerplate MySQL configuration, including the NPM import, and paste it into <code>connection.js</code>. We use <code>module.exports</code> to export <code>connection</code>.</p>\n</li>\n<li>\n<p>Again, at the root level of the directory, we create a folder, <code>models</code>, and inside <code>models</code> we create a file <code>cat.js</code>. This is our first model.</p>\n</li>\n<li>\n<p>At the top of <code>cat.js</code>, we require <code>connection.js</code> to import our database connection.</p>\n</li>\n<li>\n<p>In <code>cat.js</code>, we create an object <code>cat</code>.</p>\n</li>\n<li>\n<p>From <code>server.js</code>, cut the <code>all</code>, <code>create</code>, and <code>update</code> functions and paste them inside the <code>cat</code> object in <code>cat.js</code>. <strong>Leave the calls to these functions in <code>server.js</code>.</strong></p>\n</li>\n<li>\n<p>Now convert the functions in the <code>cat</code> object to object methods and export <code>cat</code>. <strong>Don’t forget the commas!</strong></p>\n</li>\n<li>\n<p>In <code>server.js</code>, require <code>./models/cat.js</code> and modify the calls to <code>all</code>, <code>create</code>, and <code>update</code> to invoke the imported object methods.</p>\n</li>\n<li>\n<p>Run <code>server.js</code> to verify that everything works.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Answer any questions before introducing the next activity.</p>\n</li>\n</ul>\n<h3>8. Students Do: Models (10 mins)</h3>\n<ul>\n<li>\n<p>See <a href=\"#\">16-Stu_Models/README.md</a></p>\n</li>\n<li>\n<p>Based on your demonstration, and following the instructions included with the activity files, students will modularize the Promise-based functions from the previous activity and implement the Model layer of their application.</p>\n</li>\n<li>\n<p>Additionally, students will create a new model, <code>dogs</code>, and call its methods from <code>server.js</code>.</p>\n</li>\n</ul>\n<h3>9. Everyone Do: Models Review (10 mins)</h3>\n<ul>\n<li>\n<p>If you are comfortable doing so, call on students to live code the solution using your laptop. Alternatively, ask students to Slack individual files to #class-instruction and piece together the solution using files from different authors. This will help reinforce the usefulness of modularity in the MVC framework by demonstrating that components can be completed by a team of developers. This is also an opportunity to debug in front of the class if there are discrepancies between files.</p>\n</li>\n<li>\n<p>Answer any questions. If students ask about the dog model, <code>dog.js</code>, and its implementation, use it as a segue into the next demo.</p>\n</li>\n</ul>\n<h3>10. Instructor Do: ORM (15 mins)</h3>\n<ul>\n<li>\n<p>See <a href=\"#\">17-Ins_ORM</a></p>\n</li>\n<li>\n<p>Within the Unsolved folder, open <code>cat.js</code> and <code>dog.js</code> side-by-side in your IDE.</p>\n</li>\n<li>\n<p>Ask the class the following questions:</p>\n<ul>\n<li>\n<p>What is DRY?</p>\n</li>\n<li>\n<p>Is this code DRY? If not, why?</p>\n</li>\n<li>\n<p>What could we do to make this code DRY?</p>\n</li>\n<li>\n<p>What does a constructor function do?</p>\n</li>\n<li>\n<p>What is MySQL?</p>\n</li>\n<li>\n<p>So what do you think Object Relational Mapping is?</p>\n</li>\n<li>\n<p>What do you think the benefits of ORMs are?</p>\n</li>\n</ul>\n</li>\n<li>\n<p>If students struggle, guide them to the following answers:</p>\n<ul>\n<li>\n<p>DRY is an acronym for Don’t Repeat Yourself</p>\n</li>\n<li>\n<p>The code is not DRY because both <code>cat.js</code> and <code>dog.js</code> implement the same functionality, albeit using different tables.</p>\n</li>\n<li>\n<p>To make this code more DRY, we could create generic methods to import into both <code>cat.js</code> and <code>dog.js</code> to then query specific tables.</p>\n</li>\n<li>\n<p>A constructor function creates an object.</p>\n</li>\n<li>\n<p>MySQL is a relational database.</p>\n</li>\n<li>\n<p>Object Relational Mapping is mapping database functionality and structure to an object.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Feel free to make a bad Promise pun as you return to the concept of ORM.</p>\n</li>\n<li>\n<p>Briefly explain a few of the benefits of using an ORM:</p>\n<ul>\n<li>\n<p>ORMs allow developers to create reusable functions to query a relational database using their programming language.</p>\n</li>\n<li>\n<p>ORMs allow developers to migrate to a different database architecture without needing to change the entire codebase, only the functionality of the ORM.</p>\n</li>\n<li>\n<p>ORMs also provide more security as developers are not writing queries in their code and instead rely on the ORM to make queries.</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Either way, explain the following:</p>\n<ul>\n<li>\n<p>In the <code>config</code> folder create a new file, <code>orm.js</code>, and require <code>connection.js</code>.</p>\n</li>\n<li>\n<p>Next, in <code>orm.js</code> create a constructor function, <code>ORM</code>, with a parameter <code>table</code>, and initialize it with <code>this.table = table</code>.</p>\n</li>\n<li>\n<p>Cut the methods from either <code>cat.js</code> or <code>'dog.js</code> and paste them inside the <code>ORM</code> constructor.</p>\n</li>\n<li>\n<p>Refactor the object methods into constructor methods using <code>this</code>. <strong>Don’t forget to change the <code>:</code> to <code>=</code>!</strong></p>\n</li>\n<li>\n<p>Then export the ORM: <code>module.exports = ORM;</code></p>\n</li>\n<li>\n<p>Lastly, refactor each model to reflect the code below, respectively:</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">ORM</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../config/orm.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> cat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ORM</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cats\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> cat<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>Run the server to verify that everything works.</li>\n</ul>\n</li>\n<li>\n<p>If students have further questions, refer them to the Wikipedia article on <a href=\"https://en.wikipedia.org/wiki/Object-relational_mapping\">Object Relational Mapping</a>.</p>\n</li>\n</ul>\n<h3>11. Students Do: ORM (10 min)</h3>\n<ul>\n<li>\n<p>See <a href=\"#\">18-Stu_ORM/README.md</a> for instructions</p>\n</li>\n<li>\n<p>Based on your demonstration, and following the instructions included with the activity files, students will implement ORM in their application.</p>\n</li>\n<li>\n<p>Additionally, students will add a <code>delete</code> method to the ORM and call it from <code>server.js</code>.</p>\n</li>\n<li>\n<p>The BONUS calls for students to refactor the constructor function as a class.</p>\n</li>\n</ul>\n<h3>12. Everyone Do: ORM Review (10 min)</h3>\n<ul>\n<li>Briefly address the implementation of the <code>delete</code> method in <code>orm.js</code>:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">delete</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> sql <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`DELETE FROM ?? WHERE id = ?`</span></span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    connection<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>table<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>@TODO: Finish ORM</p>","frontmatter":{"title":"Object-Relational Mapping","date":"December 31, 2018","description":null}}},"pageContext":{"slug":"/object-relational-mapping/","previous":{"fields":{"slug":"/advice-coding-bootcamp-students/"},"frontmatter":{"title":"Advice for Coding Bootcamp Students"}},"next":{"fields":{"slug":"/install-nvidia-cuda-linux-blender-cycles/"},"frontmatter":{"title":"How to Install NVIDIA Cuda Toolkit on Linux for Blender 2.8 Cycles"}}}}